import dotenv from 'dotenv'
import Product from '../models/productModel.js'
import connectDB from '../config/db.js'

dotenv.config()

connectDB()

const categories_to_strings = {
    'Fruits & Vegetables': [
        'חציל',
        'ירק',
        'קלוף',
        'שרי אשכולות',
        'אורגנו',
        'קייל',
        'גזר',
        'סלט המושבה',
        'פסיפלורה',
        'ליקופין',
        'אורגני',
        'לקט',
        'פטריות',
        'ערוגות',
        'גראס',
        'תמר',
        'בזיליקום',
        'ברוקולי',
        'שיזף',
        'קלמנטינה',
        'רוזמרין',
        'קוקוס לשתיה',
        'כרוב אדום',
        'חסה',
        'כרוב לבן בד"צ',
        'שום טרי',
        'גזר 400',
        'שיבה',
        'אפרסמון',
        'סלרי',
        'תרד',
        'עלי בייבי',
        'אבטיח',
        'רוקט',
        'קולסלאו',
        'מלפפון',
        'מלפפונים',
        'בצל אדום',
        'ברוקולי',
        'גזר תפזורת',
        'מנטה',
        'יבשות',
        'אנונה',
        'קלוף יחידה',
        'שרי ליקופן',
        'בצל',
        'פומלה',
        'תפוז',
        'קישוא',
        'סמית',
        'סלק',
        'שורש',
        'סמיט',
        'תפוח',
        'אננס',
        'בטטה',
        'פלפל',
        'תות שדה',
        'נבטי',
        'פטרוזיליה',
    ],
    'Diary & Eggs': [
        'גבינת',
        'עיזים',
        'מילקי',
        'גבינה',
        'קממבר',
        'ספלנדיד',
        'ריבת חלב',
        'בלו ',
        'צהובה',
        'דנאבלו',
        'לופרק',
        'בולגרית',
        'פולין',
        'גבינת',
        'בצים',
        'ביצים',
        'שוק.חלב',
        'חמאה',
        'פיצה',
    ],
    Drinks: [
        'משקה',
        'דיאט',
        'קולה',
        'ספרייט',
        'סילבר לייבל',
        'קברנה',
        'מים',
        'תבור',
        'סלקטד',
        'מיץ',
        'מרלו',
        'מינרלים',
        'חורטיצה',
        'תה ',
        'בירה',
        'וודקה',
        'וויסקי',
        'מינרליים',
        ' יין',
        'קינלי',
        'מי קוקוס',
        '1.5 ליטר',
        '1.5*6 ליטר',
    ],
    'Sauces & Cannes': [
        'קונפיטורת',
        'ציקורה',
        ' תה',
        'ויסוצקי',
        'פפריקה',
        'תערובת תיבול',
        'מעדן פרי',
        'חתוכות',
        'רסק',
        'פסטו',
        'דבש',
        'פטריות שמפיניון שלמות400',
        'סלט חציל',
        'אורגנו בשקית',
        'אננס שלם',
        'ממרח',
        'חרדל ריין',
        'מרוסקות',
        'טונה',
        'קונפיטורה',
        'טחינה',
        'לורפק',
        'מזולה',
        'מלח ים',
        'חומץ',
        'גרעיני תירס',
        'טחינת',
        'טונה',
        'סרדינ',
        'גפילטע',
        'מלפפונים במלח',
        'רוטב',
        'חתוכות',
        'ביטון',
        'קונפ.תות',
        'תרכיז',
        'זיתי',
        'זיתים',
        'בוטנים',
        'שמן',
        'מלפפונים במלח',
        'מרק',
        'עגבניה',
        'קפה',
        'אריסה',
        'מטבל',
        'שקיקים',
    ],

    Frozen: [
        'קפוא',
        'שלגון',
        'גויה',
        'האגן',
        'גלידונית',
        'שלגונים',

        'מוקפא',
        'גלידל',
        'קורנטו',
        'שוקווניל',
        'גלידה',
        'גלידת',
        'קרמיסימו',
        'קרמריה',
        'נישנושי תירס משפח',
    ],

    'Meat & Chicken': [
        'קבנוס',
        'צלי',
        'כתף',
        'שווארמה',
        'שניצל',
        'לבבות',
        'עגל',
        'כרעיים',
        'חזה',
        'שוק מפורק',
        'עצמות',
        'פסטרמה',
        'פסטרמת',
    ],
    'Snacks & Candies': [
        'שוקולד מריר',
        'שוקולד חלב',
        'פרלינים',
        'בייגלה',
        'מסטיק',
        'פריכונים',
        'בייגלה',
        'בוטן',
        'מקופלת',
        'פרינגלס',
        'דליתפוח',
        'מיני וויט',
        'פריכיות',
        'טבעות אננס',
        'בזוקה',
        'מתוקים',
        'שקד טבעי',
        'מאסט',
        'גרנולה',
        'פתית',
        'חלבה',
        'לינדט',
        'סוכריות',
        'חמצוצים',
        'פיטנס',
        'ביסקוויט',
        'עוגיות',
        'מסוכר',
        'קינדר',
        'פרוסטיס',
        'דגני',
        'סקיטלס',
        'שוקולד',
        'מנטוס',
        'וופל',
        'קרקר',
        'לוקום',
        'פרלינים',
        'קוואקר',
        'כריות',
        'בסקוויט',
        'קורנפלקס',

        'מאגדת',
        'אורביט',
        'ריטר',
        'ארטיק',
        'קוקו פופס',
        'בון בון',
        'לקקן',
        'איירווייז',
        'חטיף',
    ],
    Pastries: [
        'לחמניות',
        'עוגת',
        'באגט',
        'לחמניית',
        'לחמנית',
        'שטרודל',
        'בגט',
        'קמח',
        'צימקאו',
        'בצק',
        'בורקס',
        'אפייה',
        'אפיה',
        'קריספיות',
        'תערובת',
        'לחם',
        'קורואסון',
        'קרואסון',
        'פיתה',
        'סופגניה',
        'פודינג',
        'פריכה',
        'אוזן המן',
        'המן',
        'מחמצת',
    ],
    'Pharm & Detergen': [
        'דאודורנט',
        'צבע קולור',
        'אמור',
        'ניוטרוג',
        'סבון',
        'מטליות',
        'דייסה אורז פרוביוטיק',
        'לניקוי',
        'מאסל',
        'פלסטר',
        'קרפרי',
        'טמפוני',
        'פיור',
        'טמפ.',
        'מפת',
        'מדונה',
        'תחליב',
        'אדידס',
        'קרם',
        'או.בה',
        'בריטני',
        'שמפו',
        'מרכך',
        'קרמה',
        'אורל',
        'לעיניים',
        'גרנייה',
        'גבר',
        'מברשת פרו',
        'אלביב',
        'ספריי',
        'גונסון',
        'גרגירים',
        'הרמזית',
        'גילוח',
        'מדונה',
        'למדיח',
        'תחבושות',
        'קולגייט',
        'צמר גפן',
        'גלייד',
        'דאודורנט',
        'גרניה',
        'מבשם',
        'להלבנה',
        'קרם ידיים',
        'מבשם',
        'קולורמה',
        'צמרונים',
        'מסיר',
        'לחות',
        'ספוגים',
        'פיור',
        'רחצה',
        'לגבר',
        'נוזל',
        'אבנית',
        'לשיער',
        'שעווה',
        'אלביב',
        'מי פנים',
        'שיניים',
        'ניקוי',
        'מפיות',
        'סופרליינר',
        'מברשות',
        'אלסבון',
        'טלק',
        'איפור',
        'קלין',
        'ספריי',
        'אלוורה',
        'קרם לחות',
        'ספרי נשים',
        'או בה',
        'פה פורס',
        'פדים',
        'תחתונית',
        'תחתון',
        'מרידול',
        'סטיק',
        'לפסטר',
        'קרליין',
        'סנו',
        'מגבונים',
        'מגבון',
        'ספוגים',
        'לבלו',
        'יובש',
    ],
    Toabaco: [
        'מרלבורו',
        'סיגריות',
        'פרלמנט',
        'חפיסה',
        'וינסטון',
        'כאמל',
        'פאל מאל',
    ],
    'Pastas & Legumes': [
        'ספגטי',
        'אטריות',
        'נודלס',
        'אורז',
        'פרפקטו',
        'איטריות',
        'פסטה',
        'ניוקי',
        'פתיתים',
    ],
}

const updateCategories = async () => {
    let count = 0
    for (let [category, strings] of Object.entries(categories_to_strings)) {
        for (let string of strings) {
            const products = await Product.find({
                name: { $regex: `.*${string}.*` },
            })
            for (let product of products) {
                count++
                var updateCategory = { $set: { category: category } }
                await Product.updateOne(product, updateCategory)
                console.log(`Updated ${product.name}, category: ${category}`)
            }
        }
    }
    console.log(`Updated ${count} products`)
}

const updateNonCategories = async () => {
    const products = await Product.find({ category: 'non' })
    for (let product of products) {
        var updateCategory = { $set: { category: 'Other' } }
        await Product.updateOne(product, updateCategory)
        console.log(`Updated ${product.name}`)
    }
}

if (process.argv[2] == '-d') {
} else {
    updateCategories()
}
